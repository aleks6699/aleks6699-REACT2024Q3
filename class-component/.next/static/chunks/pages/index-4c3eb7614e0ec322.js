(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(3809)}])},3809:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Y}});var a=n(5893),s=n(7294),i=n(958),r=n.n(i),c=n(4630),l=n.n(c),o=n(6896);function u(){let e=(0,s.useContext)(o.N);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}function h(e){let{value:t,onInput:n}=e,{theme:s}=u();return(0,a.jsx)("input",{className:"".concat(l().input_search," ").concat(s?l().light:""),type:"text",placeholder:"Search",value:t,onInput:n})}var _=n(9438),d=n.n(_);function p(e){let{onClick:t}=e,{theme:n}=u();return(0,a.jsx)("button",{className:"".concat(d().button," ").concat(n?d().light:""),type:"button",onClick:t,children:"Search"})}function g(){let{theme:e,toggleTheme:t}=u();return(0,a.jsxs)("button",{className:"toggle",children:[(0,a.jsx)("input",{className:"btn",type:"checkbox",id:"btn",onChange:t,checked:e}),(0,a.jsx)("label",{htmlFor:"btn",children:(0,a.jsx)("span",{"data-testid":"thumb",className:"thumb"})})]})}function m(e){let{inputValue:t,onInput:n,onClick:s}=e,{theme:i}=u();return(0,a.jsxs)("div",{id:"header",className:"".concat(r().header," ").concat(i?r().light:""),children:[(0,a.jsxs)("div",{className:r().inner_search,children:[(0,a.jsx)(h,{value:t,onInput:n}),(0,a.jsx)(p,{onClick:s})]}),(0,a.jsx)(g,{})]})}var f=n(6982),x=n.n(f),j=n(489),v=n.n(j);function w(e){let{pages:t,clickPagination:n,activePage:s}=e,i=parseInt(t,10),r=[];for(let e=0;e<i;e++)r.push((0,a.jsx)("button",{className:"".concat(v().page_button," ").concat(s===(e+1).toString()?v().active:""),onClick:e=>n&&n(e),children:e+1},e));let{theme:c}=u();return(0,a.jsx)(a.Fragment,{children:0===i?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)("div",{className:v().pagination+" ".concat(c?v().light:""),children:r})})}var y=n(1163),b=n(5675),N=n.n(b),k=n(1960),I=n.n(k);function S(e){let t=new URLSearchParams(window.location.search);t.delete(e);let n="".concat(window.location.pathname,"?").concat(t.toString());window.history.replaceState({},"",n)}function C(e){let{personDetails:t,selectedPersonId:n}=e,{theme:i}=u(),r=(0,y.useRouter)(),[c,l]=(0,s.useState)(!0),{search:o,page:h,details:_}=r.query;return(0,s.useEffect)(()=>{_!==n&&r.push({query:{search:o||"",page:h||"1",details:n}})},[_,n,o,h,r]),(0,s.useEffect)(()=>{l(!0)},[t]),(0,a.jsx)(a.Fragment,{children:c?(0,a.jsxs)("div",{className:I().details_person+" ".concat(i?I().light:""),children:[(0,a.jsx)(N(),{src:"https://starwars-visualguide.com/assets/img/characters/".concat(n,".jpg"),alt:t.name,priority:!0,width:300,height:400,style:{width:"100%",height:"auto"}}),(0,a.jsx)("button",{className:I().cross,onClick:()=>{l(!c),S("details")},children:(0,a.jsx)(N(),{src:"/cross.png",alt:"cross",width:60,height:60})}),(0,a.jsx)("h1",{children:t.name}),(0,a.jsxs)("p",{children:["Height: ",t.height]}),(0,a.jsxs)("p",{children:["Mass: ",t.mass]}),(0,a.jsxs)("p",{children:["Hair color: ",t.hair_color]}),(0,a.jsxs)("p",{children:["Skin color: ",t.skin_color]}),(0,a.jsxs)("p",{children:["Gender: ",t.gender]})]}):null})}function P(e){if(!e)return null;let t=e.match(/\d+\/$/);return t?t[0].replace("/",""):null}var E=n(1664),U=n.n(E),L=n(4132),q=n.n(L);let M=e=>{let{onCange:t,checked:n}=e;return(0,a.jsx)("div",{className:q().wrapper_checkbox,children:(0,a.jsxs)("label",{className:q().textLabel,children:["Selected card",(0,a.jsx)("input",{type:"checkbox",className:q().magicCheckbox,onChange:t,checked:n})]})})};var T=n(8429),R=n(5007),V=n(5259),D=n(5344),F=n.n(D);function B(){let{theme:e}=u(),t=(0,R.I0)(),n=(0,R.v9)(e=>e.favoritesList.favoritesList);return(0,a.jsx)("div",{className:"".concat(F().flyout_container," ").concat(e?F().light:""),children:(0,a.jsxs)("div",{className:"".concat(F().flyout," ").concat(n.length>0?"":F().flyout_hidden),children:[(0,a.jsxs)("div",{className:"selected",children:["Selected items: ",n.length]}),(0,a.jsxs)("div",{className:F().inner_flyout,children:[(0,a.jsx)("button",{className:F().flyout_clear,type:"button",onClick:()=>t((0,V.V1)()),children:"Unselect all"}),(0,a.jsx)("a",{className:F().flyout_download,href:encodeURI("data:text/csv;charset=utf-8,"+["Name;URL;Skin;Eye;Gender;Mass;Height",...n.map(e=>[e.name,e.url,e.skin_color,e.eye_color,e.gender,e.mass,e.height]).map(e=>e.join(";"))].join("\n")),download:"starwars_".concat(n.length,".csv"),children:"Download"})]})]})})}var G=n(1569),H=n.n(G);function O(){return(0,a.jsx)("div",{className:H().loading,children:(0,a.jsx)(N(),{src:"/loading.gif",alt:"loading",width:100,height:100,priority:!0})})}function J(e){let{results:t,clickPagination:n,activePage:i}=e,[r,c]=(0,s.useState)(null),{theme:l}=u(),{data:o,isFetching:h}=(0,T.PP)(r,{skip:!r}),{search:_,page:d}=(0,y.useRouter)().query,p=(0,R.I0)(),g=(0,R.v9)(e=>e.favoritesList.favoritesList);p((0,V.G0)(o));let m=Math.ceil(t.count/10).toString();return(0,a.jsxs)("main",{className:x().main+" ".concat(l?x().light:""),children:[(0,a.jsxs)("div",{className:x().wrapper_main,children:[(0,a.jsx)("div",{className:x().results,onClick:function(e){e.stopPropagation(),S("details")},"aria-hidden":"true",role:"button",tabIndex:0,children:t.results.map((e,t)=>{let n=e.url?P(e.url):null;if(!n)return null;let s=!!n&&g.some(e=>void 0!==e.url&&P(e.url)===n);return(0,a.jsx)("div",{className:x().result_item,"data-id":n,onClick:e=>(function(e){let t=e.target;if("INPUT"===t.tagName&&"checkbox"===t.type)return;let n=e.currentTarget.getAttribute("data-id");n&&(c(n),function(e,t){let n=new URLSearchParams(window.location.search);n.set(t,e);let a="".concat(window.location.pathname,"?").concat(n.toString());window.history.replaceState({},"",a)}(n,"details"))})(e),"aria-hidden":"true",role:"button",tabIndex:0,children:(0,a.jsxs)(U(),{className:x().link_result,href:{pathname:"/",query:{search:_,page:d}},children:[(0,a.jsx)(N(),{src:"https://starwars-visualguide.com/assets/img/characters/".concat(n,".jpg"),alt:e.name,width:150,height:200,priority:!0,style:{width:"100%",height:"auto"}}),(0,a.jsx)("h2",{children:e.name}),(0,a.jsx)(M,{onCange:t=>{t.stopPropagation(),t.target.checked?p((0,V.a3)(e)):p((0,V.Ni)(e.name))},checked:s})]})},t)})}),h?(0,a.jsx)(O,{}):r&&o?(0,a.jsx)(C,{personDetails:o,selectedPersonId:r}):null]}),(0,a.jsx)(w,{pages:m,clickPagination:n,activePage:i}),(0,a.jsx)(B,{})]})}var Q=(e,t,n,a)=>{(0,s.useEffect)(()=>{localStorage.setItem("inputValue",t||"");let s=localStorage.getItem("inputValue");n(s||"");let i=new URLSearchParams;return i.set("search",s||""),i.set("page",e||"1"),a(i),()=>{localStorage.setItem("inputValue",t||"")}},[e])};function X(){let{theme:e}=u(),[t,n]=(0,s.useState)(""),i=(0,y.useRouter)(),{search:r="",page:c="1"}=i.query,{data:l,isFetching:o}=(0,T.u6)({searchTerm:r,currentPage:c});Q(c,r,n,e=>{i.push({pathname:i.pathname,query:{...i.query,...Object.fromEntries(e)}})});let h=(0,R.I0)(),_=(0,R.v9)(e=>e.people.people);return(0,s.useEffect)(()=>{l&&h((0,V.IX)(l))},[l,h]),(0,a.jsxs)("div",{className:"wrapper ".concat(e?"light":""),children:[(0,a.jsx)(m,{inputValue:t,onInput:e=>{e.preventDefault(),n(e.target.value.trim())},onClick:()=>{i.push({query:{search:t,page:"1"}})}}),o&&(0,a.jsx)(O,{}),(0,a.jsx)(J,{results:_,activePage:c,clickPagination:e=>{var n;e.preventDefault();let a=null!==(n=e.currentTarget.textContent)&&void 0!==n?n:"1";i.push({query:{search:t,page:a}})}})]})}function Y(){return(0,a.jsx)(X,{})}},4132:function(e){e.exports={magicCheckbox:"checked_magicCheckbox__IBEBY",wrapper_checkbox:"checked_wrapper_checkbox__dQ8U9"}},1960:function(e){e.exports={details_person:"details-person_details_person__8Y9Lp",cross:"details-person_cross__58xsk",light:"details-person_light__Vrcj9"}},5344:function(e){e.exports={flyout:"flyout_flyout__Qaekj",flyout_hidden:"flyout_flyout_hidden__KDD4j",light:"flyout_light__whog2",selected:"flyout_selected__MHP_U",inner_flyout:"flyout_inner_flyout__SQfcx",flyout_clear:"flyout_flyout_clear__u0h50",flyout_download:"flyout_flyout_download__1N6Yg"}},9438:function(e){e.exports={button:"button_button__hxNPF",light:"button_light__rhN_n"}},958:function(e){e.exports={header:"header_header__Awatn",light:"header_light__fK0gc",inner_search:"header_inner_search__djkGU"}},4630:function(e){e.exports={input_search:"input-search_input_search__V32TU",light:"input-search_light__xIMC9"}},1569:function(e){e.exports={loading:"loading_loading__3OEMo"}},6982:function(e){e.exports={results:"main_results__p5_JN",main:"main_main__Jwv_M",wrapper_main:"main_wrapper_main__z__cE",light:"main_light__G_IXf",result_item:"main_result_item__9uJdl",link_result:"main_link_result__ZMOnt"}},489:function(e){e.exports={pagination:"pagination_pagination__QiI6B",page_button:"pagination_page_button__M1IUK",active:"pagination_active__HYJBF",light:"pagination_light__iBzI_"}}},function(e){e.O(0,[61,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);